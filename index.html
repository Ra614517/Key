<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Elo - Video Rewards</title>
    <style>
        :root { --primary: #00d2ff; --bg: #0f172a; --card: #1e293b; --success: #10b981; }
        body { background: var(--bg); color: white; font-family: sans-serif; margin: 0; padding: 15px; text-align: center; }
        .card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .token-count { font-size: 2.5rem; font-weight: bold; color: var(--primary); }
        .btn { background: var(--primary); color: #000; border: none; padding: 12px 20px; border-radius: 8px; font-weight: bold; width: 100%; cursor: pointer; margin-top: 10px; }
        .btn-buy { background: var(--success); color: white; margin-bottom: 10px; }
        .btn-share { background: #5865F2; color: white; } /* Discord/Social Color */
        
        /* Video Overlay */
        #videoOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 1000; }
        #adFrame { width: 100%; height: 100%; border: none; }
        .ad-header { position: absolute; top: 0; width: 100%; background: rgba(0,0,0,0.8); padding: 15px; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; }
        #closeBtn { display: none; background: red; color: white; border: none; border-radius: 50%; width: 35px; height: 35px; font-weight: bold; }
        
        .key-display { background: #000; color: #00ff00; padding: 15px; border-radius: 10px; margin-top: 15px; display: none; border: 1px dashed var(--primary); }
    </style>
</head>
<body>

    <h1>DARK ELO PANEL</h1>

    <div class="card">
        <p>Your Balance</p>
        <div class="token-count" id="tokenDisplay">0</div>
        <button class="btn" onclick="openVideoTask()">WATCH VIDEO (+1 TOKEN)</button>
        <button class="btn btn-share" onclick="shareApp()">SHARE WITH FRIENDS</button>
    </div>

    <div class="card">
        <h3>BUY PREMIUM KEYS</h3>
        <button class="btn btn-buy" onclick="buyKey(8, 1)">BUY 1 DAY KEY (8 Tokens)</button>
        <button class="btn btn-buy" onclick="buyKey(15, 2)">BUY 2 DAYS KEY (15 Tokens)</button>
        <button class="btn btn-buy" onclick="buyKey(25, 7)">BUY 7 DAYS KEY (25 Tokens)</button>
        
        <div id="keyBox" class="key-display"></div>
    </div>

    <div id="videoOverlay">
        <div class="ad-header">
            <span id="adTimer">Reward in 30s</span>
            <button id="closeBtn" onclick="closeAd()">X</button>
        </div>
        <iframe id="adFrame" src=""></iframe>
    </div>

    <script>
        let tokens = parseInt(localStorage.getItem('user_tokens')) || 0;
        document.getElementById('tokenDisplay').innerText = tokens;
        let timeLeft = 30;
        let timerId = null;

        // VIDEO TASK SYSTEM
        function openVideoTask() {
            const adUrl = "https://www.effectivegatecpm.com/b70wi46r?key=4c9a27caa81b5b0c8faea402cdb73661";
            document.getElementById('adFrame').src = adUrl;
            document.getElementById('videoOverlay').style.display = "block";
            
            timeLeft = 30;
            timerId = setInterval(() => {
                if (document.hidden) return; // Pause if user leaves tab
                timeLeft--;
                document.getElementById('adTimer').innerText = "Reward in " + timeLeft + "s";
                if (timeLeft <= 0) {
                    clearInterval(timerId);
                    document.getElementById('adTimer').innerText = "Task Completed!";
                    document.getElementById('closeBtn').style.display = "block";
                    tokens++;
                    saveTokens();
                }
            }, 1000);
        }

        function closeAd() {
            document.getElementById('videoOverlay').style.display = "none";
            document.getElementById('adFrame').src = "";
            document.getElementById('closeBtn').style.display = "none";
            alert("Congratulations! 1 Token Added.");
        }

        // BUY SYSTEM
        function buyKey(cost, days) {
            if (tokens >= cost) {
                tokens -= cost;
                saveTokens();
                
                // Generate Fake Key for UI
                let generatedKey = "ELO-" + Math.random().toString(36).substr(2, 9).toUpperCase();
                const keyBox = document.getElementById('keyBox');
                keyBox.style.display = "block";
                keyBox.innerHTML = `<strong>SUCCESS!</strong><br>Key: ${generatedKey}<br>Validity: ${days} Day(s)`;
                alert("Key Purchased Successfully!");
            } else {
                alert("Not enough tokens! You need " + (cost - tokens) + " more.");
            }
        }

        // SHARE SYSTEM
        function shareApp() {
            const shareText = "Hey! Join Dark Elo and earn premium keys for free: " + window.location.href;
            if (navigator.share) {
                navigator.share({ title: 'Dark Elo', text: shareText, url: window.location.href });
            } else {
                window.open("https://wa.me/?text=" + encodeURIComponent(shareText));
            }
        }

        function saveTokens() {
            localStorage.setItem('user_tokens', tokens);
            document.getElementById('tokenDisplay').innerText = tokens;
        }
    </script>
</body>
</html>